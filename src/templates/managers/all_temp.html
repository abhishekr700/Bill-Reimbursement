directors/view_bills.html
{% extends "managers/manager_bar.html" %}
{% block content %}
    <div class="reset">
        <a class="btn btn-warning" href="{{ url_for('director.reset_password') }}">Reset Password</a>
    </div>
    <h1>Bills</h1>
    <label class="input-group-addon glyphicon glyphicon-sort" style="width: 50px;">
        <select class="selectpicker show-ticks" onchange="location = this.value;">
            <option>Sort</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type="default", filter_type=filter_type) }}">{{ "Default: No Sort" }}</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type="employee_designation", filter_type=filter_type) }}">{{ "Designation" }}</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type="date_of_submission", filter_type=filter_type) }}">{{ "Submission Date" }}</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type="bill_type", filter_type=filter_type) }}">{{ "Bill Type" }}</option>
        </select>
    </label>
    <label class="input-group-addon glyphicon glyphicon-filter" style="width: 50px;">
        <select class="selectpicker" onchange="location = this.value;">
            <option class="glyphicon glyphicon-filter">Filter</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type=sort_type, filter_type="pending") }}">{{ "Pending" }}</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type=sort_type, filter_type="accept") }}">{{ "Accept" }}</option>
            <option value="{{ url_for('bills.view_bills_to_director', sort_type=sort_type, filter_type="reject") }}">{{ "Reject" }}</option>
        </select>
    </label>

    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Designation</th>
            <th scope="col">Department</th>
            <th scope="col">Type</th>
            <th scope="col">Bill url</th>
            <th scope="col">Submission Date</th>
            <th scope="col">Status</th>
            <th scope="col">Accept</th>
            <th scope="col">Reject</th>
        </tr>
        </thead>
        <tbody>
        {% for bill in response %}
            <tr>
                <th scope="row">{{ loop.index }}</th>
                <td>{{ bill['manager_name'] }}</td>
                <td>{{ bill['manager_designation'] }}</td>
                <td>{{ bill['department_name'] }}</td>
                <td>{{ bill['bill_type'] }}<br>Max Reimbursement: {{ bill['max_reimbursement_amount'] }}</td>
                <td><a href="{{ bill['bill_image_url'] }}"><img src="{{ bill['bill_image_url'] }}" alt="Image" width="100" height="100"></a></td>
                <td>{{ bill['date_of_submission'] }}</td>
                <td>{{ bill['status'] }}</td>
                {% if bill['status'] == "pending" %}
                    <td>
                        <form action="{{ url_for('bills.accept_bill', bill_id=bill['_id']) }}" method="post">
                            <div><input type="text" class="form-control" id="reimburse" name="reimburse" placeholder="Enter money to Reimburse">
                            </div><br>
                            <button type="submit" class="btn btn-success"> Accept </button>
                        </form><br>
                    </td>
                    <td>
                        <a class="btn btn-danger" href="{{ url_for('bills.reject_bill', bill_id=bill['_id']) }}"><span class="glyphicon glyphicon-remove-sign"></span> Reject </a>
                    </td>
                {% else %}
                    <td>
                        <form>
                            <div><input type="text" class="form-control" id="reimburse" name="reimburse" placeholder="Enter money to Reimburse" disabled>
                            </div><br>
                            <button type="button" class="btn btn-success" disabled> Accept </button>
                        </form><br>
                    </td>
                    <td>
                        <button type="button" class="btn btn-danger" disabled><span class="glyphicon glyphicon-remove-sign"></span> Reject </button>
                    </td>
                {% endif %}
            </tr>
        {% endfor %}
        <tbody>
    </table>
{% endblock %}

directors/login_director.html
admins/edit_director.html

directors/director.py
import uuid
from src.db.database import Database
from src.db.utils import Utils
import src.models.directors.constants as directorConstants
import src.models.directors.errors as DirectorErrors

class Director(object):
    def __init__(self, company_id, email, password, name, designation, department_id, date_of_joining, _id=None):
        self.company_id = company_id
        self.email = email
        self.password = password
        self.name = name
        self.designation = designation
        self.department_id = department_id
        self.date_of_joining = date_of_joining
        self._id = _id if not None else uuid.uuid4().hex

    def is_login_valid(email, password):
        Director_data = Database.find_one(directorConstants.COLLECTION, {'email':email})

        if Director_data is None:
            raise DirectorErrors.DirectorNOtExistError("You are not registered yet!")
        if not Utils.check_hashed_password(password, Director_data['password']):
            raise DirectorErrors.IncorrectPasswordError("YOu entered wrong password")
        return True

    def add_a_director(company_id, email, password, name, designation, department_id, date_of_joining):
        pass

    def get_by_director_id(self):
        pass

    def get_by_id(self):
        pass

    def get_by_department_id(self):
        pass

directors/view.py
from flask import Blueprint, request, session, url_for, render_template
from werkzeug.utils import redirect
import src.models.directors.errors as directorErrors
from src.models.directors.director import Director
import src.decorators as manager_decorators
from src.db.utils import Utils

__author__ = 'ishween'

director_blueprint = Blueprint('director', __name__)


@director_blueprint.route('/director/login', methods = ['GET','POST'])
def login_director():
    if request.method == 'POST':
        email = request.form['email']
        password = request.form['password']

        try:
            if Director.is_login_valid(email, password):
                session['email'] = email
                return redirect(url_for('manager.to_menu', sort_type="default", filter_type="pending"))
        except directorErrors.DirectorError as a:
            return a.message

    return render_template('directors/login_director.html')


def add_director(company_id, email, name, designation, department_id, date_of_joining):
    Director.add_a_director(company_id, email, name, designation, department_id, date_of_joining)


def edit_director(designation, director_id):
    director = Director.get_by_director_id(director_id)
    if designation != "":
        director.designation = designation
        director.update_to_db()
        return redirect(url_for('admin.view_director_admin', sort_type="default", filter_type="default"))
    return render_template('admins/edit_director.html')


def delete_director(director_id):
    Director.get_by_director_id(director_id).delete()

@director_blueprint.route('/director/logout')
def logout_admin():
    session['email'] = None
    print("logout")
    #return redirect(url_for('home'))


def view_director(company_id):
    directors = Director.get_by_id(company_id)
    return Director


def get_directors_by_department(department_id):
    directors = Director.get_by_department_id(department_id)
    return directors